Цель данного упражнения заключается в исполнении следующего сценария:

1) Установка трех сервисов: ServiceA, ServiceB, ServiceC. 

2) Настройка маршрутизации входящего трафика service mesh в ServiceA

3) Направление исходящих запросов из ServiceA в ServiceB.

4) Расщепление трафика и направление запросов из ServiceA, как в ServiceB так и в ServiceC.

5) Открытие исходящего трафика из service mesh для получения ответов на запросы ServiceC. В качесте постащика данных будет использован другой прикладной сервис, развернутый в изолированном виртульном кластере (пространстве имен или namespace).

6) Перевод 100% запросов из ServiceA в ServiceC.

ServiceA при получении запроса на адрес http://localhost:8081/, для формирования ответа запрашивает информацию у некого поставщика по константному адресу http://producer-internal-host:80/, получив ответ, ServiceA включает его в ответ на вызов из-вне кластера и возвращает его. В качестве подобных поставщиков вступают ServiceB, который всегда возвращает ответ "Hello from ServiceB", и ServiceC, который получив запрос, в свою очередь, совершает запрос в изолированном пространсвте имен на URL http://istio-ingressgateway.istio-system.svc.cluster.local/service-ext и возвращает полученный ответ. ServiceB и ServiceC ожидают запросы на адрес http://localhost:8082/.

Все изменения в направлениях маршрутизации будут происходит исключительно конфигурацией service mesh при помощи API Istio и прозрачно для установленных сервисов.

Исходный код приложений:

`https://github.com/ArtashesAvetisyan/sbercode-scenarios/tree/master/apps`{{copy}}

Перейдем к следующему шагу.